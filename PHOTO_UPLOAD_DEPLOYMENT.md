# üì∏ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–¢–µ–ø–µ—Ä—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –∑–∞—è–≤–∫–∞—Ö –Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ **Firebase Storage** –≤–º–µ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π.

## üîß –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### 1. –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
flutter pub get
```

### 2. –†–∞–∑–≤–µ—Ä–Ω—É—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ Firebase Storage

```bash
# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ Storage rules
firebase deploy --only storage

# –ò–ª–∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞
firebase deploy --only firestore,storage
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Firebase Console

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Firebase Console](https://console.firebase.google.com)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **newport-23a19**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Storage**
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ bucket —Å–æ–∑–¥–∞–Ω: `newport-23a19.firebasestorage.app`

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–æ—Ç–æ** ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
2. **–ó–∞–≥—Ä—É–∑–∫–∞ –≤ Firebase Storage** ‚Üí –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ
3. **–ü–æ–ª—É—á–µ–Ω–∏–µ URL** ‚Üí –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ Firebase URL
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏** ‚Üí URL —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Firestore
5. **–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–∞–π—Ç** ‚Üí URL –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ webhook

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è:

```
Firebase Storage:
‚îú‚îÄ‚îÄ service_requests/
‚îÇ   ‚îú‚îÄ‚îÄ {requestId}/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ images/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ image_1_{timestamp}.jpg
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ image_2_{timestamp}.jpg
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ image_3_{timestamp}.jpg
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îî‚îÄ‚îÄ {userId}/
‚îÇ       ‚îî‚îÄ‚îÄ profile/
‚îî‚îÄ‚îÄ utility_readings/
    ‚îî‚îÄ‚îÄ {readingId}/
        ‚îî‚îÄ‚îÄ images/
```

## üé® –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:
- ‚è≥ **–°–µ—Ä–∞—è —Ä–∞–º–∫–∞ + —Å–ø–∏–Ω–Ω–µ—Ä** = –∑–∞–≥—Ä—É–∑–∫–∞
- ‚úÖ **–ó–µ–ª–µ–Ω–∞—è —Ä–∞–º–∫–∞ + –≥–∞–ª–æ—á–∫–∞** = –∑–∞–≥—Ä—É–∂–µ–Ω–æ
- ‚ùå **–ö—Ä–∞—Å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** = –æ—à–∏–±–∫–∞

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- –ú–∞–∫—Å–∏–º—É–º **3 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏** –Ω–∞ –∑–∞—è–≤–∫—É
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: **5MB**
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, GIF, WebP, BMP

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–∞–≤–∏–ª–∞ Storage:
- –¢–æ–ª—å–∫–æ **–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å
- –¢–æ–ª—å–∫–æ **–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** –¥–æ 5MB
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏–∑ UI
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤** –Ω–∞ —É—Ä–æ–≤–Ω–µ Storage

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ó–∞–≥—Ä—É–∑–∫–∞ —Å –∫–∞–º–µ—Ä—ã** - —Ñ–æ—Ç–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
2. **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—ã–±–æ—Ä —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–æ—Ç–æ  
3. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏** - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å–ø–∏–Ω–Ω–µ—Ä –∏ —Å—Ç–∞—Ç—É—Å
4. **–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ** - —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ UI –∏ Storage
5. **–õ–∏–º–∏—Ç —Ñ–æ—Ç–æ** - –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ 3 —Ñ–æ—Ç–æ
6. **–ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ –¥–ª—è —Ñ–∞–π–ª–æ–≤ > 5MB

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Firebase Console:
1. –§–∞–π–ª—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ Storage
2. URL —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Firestore –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `serviceRequests`
3. –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ –∏—Å—á–µ–∑–∞—é—Ç –∏–∑ Storage

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç–µ –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
flutter build apk --release

# 2. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ Firebase
firebase deploy --only storage,firestore

# 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
flutter install --release

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Firebase Console —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

## üìù Changelog

### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ `ImageUploadService` - —Å–µ—Ä–≤–∏—Å –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ Firebase Storage
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Storage
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∏ —Ç–∏–ø–∞ —Ñ–∞–π–ª–æ–≤

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚ùå –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏
- ‚ùå Mock URL –≤ –∑–∞—è–≤–∫–∞—Ö
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- ‚ùå –ù–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ 