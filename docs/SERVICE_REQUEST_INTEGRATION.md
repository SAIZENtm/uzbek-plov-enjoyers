# üöÄ –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

## ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–¢–µ–ø–µ—Ä—å –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∞–µ—Ç –∑–∞—è–≤–∫—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

1. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Firebase Firestore** - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
2. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –≤–Ω–µ—à–Ω–∏–π —Å–∞–π—Ç** - —á–µ—Ä–µ–∑ HTTP webhook
3. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ** - –¥–ª—è —Ä–∞–±–æ—Ç—ã –æ—Ñ–ª–∞–π–Ω

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –û–±–Ω–æ–≤–∏—Ç–µ URL webhook

–í —Ñ–∞–π–ª–µ `lib/core/services/service_request_service.dart`:

```dart
static const String _webhookUrl = 'https://your-website.com/api/service-requests';
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á

–í —Ç–æ–º –∂–µ —Ñ–∞–π–ª–µ:

```dart
'X-API-Key': 'your-api-key',
```

### 3. –û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ Firestore

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª:

```bash
firebase deploy --only firestore:rules
```

## üìä –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–æ–∫–∞–∑–∞–ª–∏:

```json
{
  "userId": "abc123",
  "apartmentNumber": "203",
  "block": "F BLOK",
  "requestType": "Electrical",
  "description": "The light in the kitchen stopped working.",
  "priority": "High",
  "contactMethod": "Phone",
  "preferredTime": "2025-07-09T14:00:00+05:00",
  "photos": [
    "https://firebasestorage.googleapis.com/v0/b/projectid/o/images%2Freq1234.jpg"
  ],
  "status": "new",
  "createdAt": "2025-07-09T10:38:00+05:00",
  "updatedAt": "2025-07-09T10:38:00+05:00"
}
```

## üõ†Ô∏è –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ ServiceRequestService:

- `createServiceRequest()` - —Å–æ–∑–¥–∞–µ—Ç –∑–∞—è–≤–∫—É —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- `syncOfflineRequests()` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –æ—Ñ–ª–∞–π–Ω –∑–∞—è–≤–∫–∏
- `_saveToFirestore()` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Firebase
- `_sendToExternalWebsite()` - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –≤–Ω–µ—à–Ω–∏–π —Å–∞–π—Ç

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏:

- `ServiceRequest` - —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è –≤–∫–ª—é—á–∞—è `userId`, `block`, `priority`, `contactMethod`, `preferredTime`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `fromFirestore()` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Firebase

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Firebase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
dart run scripts/check_firestore_data.dart
```

### 2. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∑–∞—è–≤–∫–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

- –û—Ç–∫—Ä–æ–π—Ç–µ —ç–∫—Ä–∞–Ω "New Request"
- –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook

```bash
curl -X POST https://your-website.com/api/service-requests \
  -H "Content-Type: application/json" \
  -H "X-API-Key: your-api-key" \
  -d @test_request.json
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### Firestore –∫–æ–ª–ª–µ–∫—Ü–∏–∏:

```
serviceRequests/{requestId}
‚îú‚îÄ‚îÄ id: string
‚îú‚îÄ‚îÄ userId: string
‚îú‚îÄ‚îÄ apartmentNumber: string
‚îú‚îÄ‚îÄ block: string
‚îú‚îÄ‚îÄ requestType: string
‚îú‚îÄ‚îÄ description: string
‚îú‚îÄ‚îÄ priority: string
‚îú‚îÄ‚îÄ contactMethod: string
‚îú‚îÄ‚îÄ preferredTime: string
‚îú‚îÄ‚îÄ photos: array
‚îú‚îÄ‚îÄ status: string
‚îú‚îÄ‚îÄ createdAt: string
‚îú‚îÄ‚îÄ updatedAt: string
‚îî‚îÄ‚îÄ additionalData: object
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞—è–≤–∫–∏
- Webhook –∑–∞—â–∏—â–µ–Ω API –∫–ª—é—á–æ–º
- –î–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ
- –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ï—Å–ª–∏ Firebase –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
- –ó–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏

### –ï—Å–ª–∏ –≤–Ω–µ—à–Ω–∏–π —Å–∞–π—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
- –ó–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Firebase
- Webhook –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –æ—à–∏–±–∫–∞

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –¥–ª—è:
- –£—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫ –≤ Firebase
- –£—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π —Å–∞–π—Ç
- –û—à–∏–±–æ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- –û—Ñ–ª–∞–π–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## üîó –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- [–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ webhook](WEBHOOK_INTEGRATION.md)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Firestore](FIRESTORE_STRUCTURE.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é](TESTING_GUIDE.md) 