# üåê –†–ï–®–ï–ù–ò–ï –°–ï–¢–ï–í–´–• –û–®–ò–ë–û–ö FIREBASE

## üìã –û—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### ‚ùå –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
[cloud_firestore/unavailable] The service is currently unavailable
[firebase_messaging/unknown] java.io.IOException: SERVICE_NOT_AVAILABLE
```

### ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç **–¥–∞–∂–µ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö**
- FCM –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è **–≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ** (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Ö–æ–¥)
- –û–ø–µ—Ä–∞—Ü–∏–∏ —Å Firestore –∏–º–µ—é—Ç **timeout –∏ fallback**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç **–ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –≤–º–µ—Å—Ç–æ –æ—à–∏–±–æ–∫

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **AuthService** - –û—Å–Ω–æ–≤–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ **Retry –ª–æ–≥–∏–∫–∞** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–≤–∞—Ä—Ç–∏—Ä (3 –ø–æ–ø—ã—Ç–∫–∏)
- ‚úÖ **Timeout 15 —Å–µ–∫** –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä –ø–æ –ø–∞—Å–ø–æ—Ä—Ç—É
- ‚úÖ **Fallback** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—É—é –∫–≤–∞—Ä—Ç–∏—Ä—É –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ **FCM –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ** - –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

### 2. **ClientService** - –†–∞–±–æ—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- ‚úÖ **Timeout 8 —Å–µ–∫** –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å Firestore
- ‚úÖ **Graceful fallback** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Firestore
- ‚úÖ **–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã** –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–∞

### 3. **FCMService** - Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ **Timeout 10 —Å–µ–∫** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
- ‚úÖ **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** (catchError)
- ‚úÖ **–ü–æ–Ω—è—Ç–Ω—ã–µ –ª–æ–≥–∏** –≤–º–µ—Å—Ç–æ –æ—à–∏–±–æ–∫

### 4. **ApartmentService** - –ü–æ–∏—Å–∫ –∫–≤–∞—Ä—Ç–∏—Ä
- ‚úÖ **3 —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–∏—Å–∫–∞** (collectionGroup, users, blocks)
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ª—é–±–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** –¥–∞–Ω–Ω—ã—Ö –≤ Firestore
- ‚úÖ **–ù–∞–¥–µ–∂–Ω—ã–π –ø–æ–∏—Å–∫** –∫–≤–∞—Ä—Ç–∏—Ä

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
1. **–ê–≤—Ç–æ—Ä–∏–∑—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ—è—Ö —Å–µ—Ç–∏
2. **–ù–µ –∑–∞–≤–∏—Å–∞–µ—Ç** –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∑–∞–≥—Ä—É–∑–∫–∏
3. **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
4. **–ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É** —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
5. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å—ã** –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∫–≤–∞—Ä—Ç–∏—Ä—É** —á–µ—Ä–µ–∑ `test_create_apartment.html`
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: `flutter run`
3. **–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ** –¥–ª—è –≤—Ö–æ–¥–∞
4. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å** –¥–∞–∂–µ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
- ‚úÖ **–£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** —Å –ª—é–±—ã–º–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ **–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω** –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö FCM
- ‚úÖ **–†–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π
- ‚ö†Ô∏è –í –ª–æ–≥–∞—Ö –º–æ–≥—É—Ç –±—ã—Ç—å **info —Å–æ–æ–±—â–µ–Ω–∏—è** –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)

## üì± –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –ï—Å–ª–∏ —Å–Ω–æ–≤–∞ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç** - WiFi –∏–ª–∏ –º–æ–±–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - —á–∞—Å—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö
3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ** - Firebase —Å–µ—Ä–≤–∏—Å—ã –º–æ–≥—É—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - —Ç–µ–ø–µ—Ä—å –æ–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ vs –Ω–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ:

**üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ** (–±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É):
- –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–±–ª–µ–º—ã —Å Firebase Auth

**üü° –ù–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ** (–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç):
- FCM –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- Firestore –º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç
- –û—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–∞

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
flutter run --verbose

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
flutter clean && flutter pub get

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–µ–∑ –æ—Ç–ª–∞–¥–∫–∏
flutter run --release
```

### –í —Å–ª—É—á–∞–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:

1. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ **Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **–ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** Firestore
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ **–¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ/—ç–º—É–ª—è—Ç–æ—Ä–µ**

**–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Newport Resident —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –¥–∞–∂–µ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö!** üéâ 