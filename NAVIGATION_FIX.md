# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

## üö® –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–æ–∫ –≤ –¥–∏–∞–ª–æ–≥–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
You have popped the last page off of the stack, there are no pages left to show
'package:go_router/src/delegate.dart': Failed assertion: line 116 pos 7: 'currentConfiguration.isNotEmpty'
```

## üîç –ü—Ä–∏—á–∏–Ω–∞
–ü—Ä–æ–±–ª–µ–º–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –∏–∑-–∑–∞ –ø–æ–ø—ã—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `Navigator.pop()` –¥–≤–∞–∂–¥—ã –≤ –¥–∏–∞–ª–æ–≥–µ —É—Å–ø–µ—Ö–∞:
```dart
// –ü–†–û–ë–õ–ï–ú–ù–´–ô –ö–û–î:
Navigator.of(context).pop(); // –ó–∞–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥
Navigator.of(context).pop(); // –ó–∞–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É - –û–®–ò–ë–ö–ê!
```

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø–æ–ø—ã—Ç–∫–µ —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ —Å—Ç–µ–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, —á—Ç–æ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ –≤ Go Router.

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ –¥–∏–∞–ª–æ–≥–µ —É—Å–ø–µ—Ö–∞

**–î–æ (–ø—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥):**
```dart
actions: [
  TextButton(
    onPressed: () {
      Navigator.of(context).pop(); // –ó–∞–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥
      Navigator.of(context).pop(); // –ó–∞–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É - –û–®–ò–ë–ö–ê!
    },
    child: const Text('–ó–∞–∫—Ä—ã—Ç—å'),
  ),
  BlueButton(
    text: '–ú–æ–∏ –∑–∞—è–≤–∫–∏',
    onPressed: () {
      Navigator.of(context).pop(); // –ó–∞–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥
      Navigator.of(context).pop(); // –ó–∞–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É - –û–®–ò–ë–ö–ê!
      context.go('/services/requests');
    },
  ),
],
```

**–ü–æ—Å–ª–µ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥):**
```dart
actions: [
  TextButton(
    onPressed: () {
      Navigator.of(context).pop(); // –ó–∞–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥
      context.go('/services'); // –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∫ —É—Å–ª—É–≥–∞–º
    },
    child: const Text('–ó–∞–∫—Ä—ã—Ç—å'),
  ),
  BlueButton(
    text: '–ú–æ–∏ –∑–∞—è–≤–∫–∏',
    onPressed: () {
      Navigator.of(context).pop(); // –ó–∞–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥
      context.go('/services/requests'); // –ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞—è–≤–∫–∞–º
    },
  ),
],
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"

**–î–æ–±–∞–≤–ª–µ–Ω `PopScope` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:**
```dart
@override
Widget build(BuildContext context) {
  return PopScope(
    canPop: !_isLoading,
    onPopInvoked: (didPop) {
      if (!didPop && !_isLoading) {
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —ç–∫—Ä–∞–Ω—É
        if (context.canPop()) {
          context.pop();
        } else {
          // –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —ç–∫—Ä–∞–Ω–∞, –∏–¥–µ–º –∫ —É—Å–ª—É–≥–∞–º
          context.go('/services');
        }
      }
    },
    child: Scaffold(
      // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
    ),
  );
}
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –≤ AppBar:**
```dart
leading: IconButton(
  icon: const Icon(Icons.arrow_back),
  onPressed: _isLoading ? null : () {
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —ç–∫—Ä–∞–Ω—É
    if (context.canPop()) {
      context.pop();
    } else {
      // –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —ç–∫—Ä–∞–Ω–∞, –∏–¥–µ–º –∫ —É—Å–ª—É–≥–∞–º
      context.go('/services');
    }
  },
),
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. ‚úÖ **–û—à–∏–±–∫–∞ "popped the last page off of the stack"** - —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
2. ‚úÖ **–î–≤–æ–π–Ω–æ–π Navigator.pop()** - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é
3. ‚úÖ **–ù–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥** - –¥–æ–±–∞–≤–ª–µ–Ω PopScope
4. ‚úÖ **Inconsistent navigation behavior** - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### –õ–æ–≥–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:
1. **–ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å"** - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫ —Å–ø–∏—Å–∫—É —É—Å–ª—É–≥ (`/services`)
2. **–ö–Ω–æ–ø–∫–∞ "–ú–æ–∏ –∑–∞—è–≤–∫–∏"** - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –∑–∞—è–≤–∫–∞–º (`/services/requests`)
3. **–°–∏—Å—Ç–µ–º–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —ç–∫—Ä–∞–Ω—É –≤ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
4. **–ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –≤ AppBar** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —ç–∫—Ä–∞–Ω—É –≤ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
5. **Fallback –Ω–∞–≤–∏–≥–∞—Ü–∏—è** - –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —ç–∫—Ä–∞–Ω–∞, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ `/services`
6. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏** - –≤–æ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –Ω–µ—Ç –ø–æ–ø—ã—Ç–æ–∫ —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- ‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å** - —á–µ—Ç–∫–∞—è –ª–æ–≥–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ **UX** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—Ç, –∫—É–¥–∞ –ø–æ–ø–∞–¥–µ—Ç
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å Go Router

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:
1. ‚úÖ –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É
2. ‚úÖ –í –¥–∏–∞–ª–æ–≥–µ —É—Å–ø–µ—Ö–∞ –Ω–∞–∂–º–∏—Ç–µ "–ó–∞–∫—Ä—ã—Ç—å" - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ `/services`
3. ‚úÖ –í –¥–∏–∞–ª–æ–≥–µ —É—Å–ø–µ—Ö–∞ –Ω–∞–∂–º–∏—Ç–µ "–ú–æ–∏ –∑–∞—è–≤–∫–∏" - –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–π—Ç–∏ –∫ `/services/requests`
4. ‚úÖ –ù–∞–∂–º–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—É—é –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —ç–∫—Ä–∞–Ω—É
5. ‚úÖ –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" –≤ AppBar - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —ç–∫—Ä–∞–Ω—É
6. ‚úÖ –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —ç–∫—Ä–∞–Ω–∞, –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–π—Ç–∏ –∫ `/services`
7. ‚úÖ –í–æ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
flutter analyze  # ‚úÖ –ë–µ–∑ –æ—à–∏–±–æ–∫
flutter run      # ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

## üéâ –ì–æ—Ç–æ–≤–æ!
–ù–∞–≤–∏–≥–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ! –ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ —Å—Ç–µ–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏. 