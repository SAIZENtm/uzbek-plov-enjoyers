# üîê –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò –í NEWPORT RESIDENT

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –∫–≤–∞—Ä—Ç–∏—Ä—É –ø—Ä–∏ –≤–≤–æ–¥–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö  
**–õ–æ–≥ –æ—à–∏–±–∫–∏:** `Found 0 potential matches by apartment_number` –∏ `Apartment not found`

## üîç –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –¥–∞–Ω–Ω—ã—Ö –≤ Firestore –∏ –ª–æ–≥–∏–∫–æ–π –ø–æ–∏—Å–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

1. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É: `/blocks/{blockId}/apartments/{apartmentNumber}`
2. **–†–µ–∞–ª—å–Ω—ã–π –∫–æ–¥** –∏—â–µ—Ç –≤: `/users/{blockId}/apartments/{apartmentNumber}` 
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –∫–≤–∞—Ä—Ç–∏—Ä

**–ß–¢–û –°–î–ï–õ–ê–ù–û:** –û–±–Ω–æ–≤–ª–µ–Ω `ApartmentService` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª—é–±–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –¥–∞–Ω–Ω—ã—Ö

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 3 —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**

1. **–°—Ç—Ä–∞—Ç–µ–≥–∏—è 1:** `collectionGroup('apartments')` - –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è–º
2. **–°—Ç—Ä–∞—Ç–µ–≥–∏—è 2:** `collection('users')` - –ø–æ–∏—Å–∫ –Ω–∞–ø—Ä—è–º—É—é –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ users  
3. **–°—Ç—Ä–∞—Ç–µ–≥–∏—è 3:** –ü–µ—Ä–µ–±–æ—Ä –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –±–ª–æ–∫–æ–≤ A, B, C, D, E, F

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–§–ê–ô–õ:** `test_create_apartment.html`

**–ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `test_create_apartment.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:
   - **–¢–µ—Å—Ç 1:** –ö–≤–∞—Ä—Ç–∏—Ä–∞ 101, —Ç–µ–ª–µ—Ñ–æ–Ω +998900000101
   - **–¢–µ—Å—Ç 2:** –ö–≤–∞—Ä—Ç–∏—Ä–∞ 15, —Ç–µ–ª–µ—Ñ–æ–Ω +998900000015  
   - **–¢–µ—Å—Ç 3:** –ö–≤–∞—Ä—Ç–∏—Ä–∞ D-205, —Ç–µ–ª–µ—Ñ–æ–Ω +998900000205
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É"
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firebase –ø—Ä–∞–≤–∏–ª

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ Firestore —Ä–∞–∑—Ä–µ—à–∞—é—Ç —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –≠—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: HTML —Ñ–æ—Ä–º–∞ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ `test_create_apartment.html`
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∫–≤–∞—Ä—Ç–∏—Ä—É
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `flutter run`
4. –í–≤–µ–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: Firebase Console

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Firebase Console](https://console.firebase.google.com)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `newport-23a19`
3. Firestore Database ‚Üí Data
4. –°–æ–∑–¥–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –≤—Ä—É—á–Ω—É—é:

```
Collection: users
Document ID: 101
Fields:
  - apartment_number: "101"
  - phone: "+998900000101"
  - full_name: "–¢–µ—Å—Ç –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
  - passport_number: "AB1234567"
  - block_number: "D"
  - block_name: "D BLOK"
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ

–ï—Å–ª–∏ –≤ –±–∞–∑–µ —É–∂–µ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Firebase Console
2. –ù–∞–π–¥–∏—Ç–µ –ª—é–±—É—é –∫–≤–∞—Ä—Ç–∏—Ä—É –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `users`
3. –ó–∞–ø–æ–º–Ω–∏—Ç–µ `apartment_number` –∏ `phone`
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞

## üìä –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–§–ê–ô–õ:** `scripts/debug_firestore.dart`

–î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ Flutter SDK —Ä–∞–±–æ—Ç–∞–µ—Ç):

```bash
dart run scripts/debug_firestore.dart
```

## üîÑ –õ–æ–≥–∏–∫–∞ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

```dart
// –°–¢–†–ê–¢–ï–ì–ò–Ø 1: collectionGroup('apartments')
final querySnapshot = await _firestore
    .collectionGroup('apartments')
    .where('apartment_number', isEqualTo: apartmentNumber)
    .get();

// –°–¢–†–ê–¢–ï–ì–ò–Ø 2: collection('users') –Ω–∞–ø—Ä—è–º—É—é  
final usersSnapshot = await _firestore
    .collection('users')
    .where('apartment_number', isEqualTo: apartmentNumber)
    .get();

// –°–¢–†–ê–¢–ï–ì–ò–Ø 3: –ü–æ–∏—Å–∫ –ø–æ –∏–∑–≤–µ—Å—Ç–Ω—ã–º –±–ª–æ–∫–∞–º
final knownBlocks = ['A', 'B', 'C', 'D', 'E', 'F', 'A BLOK', 'B BLOK', ...];
for (var blockId in knownBlocks) {
  final blockApartmentsSnapshot = await _firestore
      .collection('users')
      .doc(blockId)
      .collection('apartments')
      .where('apartment_number', isEqualTo: apartmentNumber)
      .get();
}
```

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ 1: –ü—Ä—è–º–æ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ users
```
/users/101
  ‚îú‚îÄ‚îÄ apartment_number: "101"
  ‚îú‚îÄ‚îÄ phone: "+998900000101"
  ‚îú‚îÄ‚îÄ full_name: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
  ‚îî‚îÄ‚îÄ block_number: "D"
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ 2: –í –ø–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏–∏ apartments
```
/users/D BLOK/apartments/101
  ‚îú‚îÄ‚îÄ apartment_number: "101"  
  ‚îú‚îÄ‚îÄ phone: "+998900000101"
  ‚îú‚îÄ‚îÄ full_name: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
  ‚îî‚îÄ‚îÄ block_number: "D"
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ 3: –í –±–ª–æ–∫–∞—Ö –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç—ã
```
/users/D/apartments/101
  ‚îú‚îÄ‚îÄ apartment_number: "101"
  ‚îú‚îÄ‚îÄ phone: "+998900000101"  
  ‚îú‚îÄ‚îÄ full_name: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
  ‚îî‚îÄ‚îÄ block_number: "D"
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** —á–µ—Ä–µ–∑ HTML —Ñ–æ—Ä–º—É
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥** –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã
4. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Android Studio/VS Code
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Firebase
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ù–æ–≤—ã–π —É–ª—É—á—à–µ–Ω–Ω—ã–π ApartmentService –¥–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏ –∫–≤–∞—Ä—Ç–∏—Ä—É –≤ –ª—é–±–æ–π –∏–∑ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö!** ‚úÖ 