# üî• –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Firebase: Storage + Firestore + Auth

## üö® **–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

### 1. **Storage Rules - –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –æ—à–∏–±–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤**
```javascript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (—ç—Ç–æ ~10GB!)
request.resource.size < 5 * 1080 * 1920

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (—ç—Ç–æ 5MB)  
request.resource.size < 5 * 1024 * 1024
```

### 2. **Firestore Rules - —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ –¥–ª—è userProfiles**
```javascript
// –°—Ç–∞—Ä–æ–µ –ø—Ä–∞–≤–∏–ª–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–æ –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
allow write: if isAuthenticated() || request.auth != null;

// –ù–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ (–≤—Ä–µ–º–µ–Ω–Ω–æ)
allow read, write: if true;
```

### 3. **–ê–Ω–æ–Ω–∏–º–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∞**

## ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:**

### **–§–∞–π–ª `storage.rules`:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤  
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –¥–æ 10MB
- ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–æ –ø—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –¥–ª—è —Å–∞–π—Ç–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### **–§–∞–π–ª `firestore.rules`:**
- ‚úÖ –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ `userProfiles` (–≤—Ä–µ–º–µ–Ω–Ω–æ)
- ‚úÖ –î–æ—Å—Ç—É–ø –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### **–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `test_photo_upload.html` - —Ç–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- ‚úÖ `test_firestore_auth.html` - —Ç–µ—Å—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ Firestore

## üöÄ **–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**

### **–®–ê–ì 1: –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ —á–µ—Ä–µ–∑ Firebase Console**

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Firebase Console](https://console.firebase.google.com)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **newport-23a19**

#### **–î–ª—è Storage:**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ **Storage** ‚Üí **Rules** 
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `storage.rules`
5. –ù–∞–∂–º–∏—Ç–µ **Publish**

#### **–î–ª—è Firestore:**
6. –ü–µ—Ä–µ–π–¥–∏—Ç–µ **Firestore Database** ‚Üí **Rules**
7. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `firestore.rules` 
8. –ù–∞–∂–º–∏—Ç–µ **Publish**

### **–®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–Ω–æ–Ω–∏–º–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é**

1. –í Firebase Console: **Authentication** ‚Üí **Sign-in methods**
2. –ù–∞–π–¥–∏—Ç–µ **Anonymous** –∏ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ–Ω **–≤–∫–ª—é—á–µ–Ω**
3. –ï—Å–ª–∏ –≤—ã–∫–ª—é—á–µ–Ω - –≤–∫–ª—é—á–∏—Ç–µ

### **–®–ê–ì 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ `test_firestore_auth.html`** –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ù–∞–∂–º–∏—Ç–µ **"üìù –ó–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"**
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–∞
4. **–û—Ç–∫—Ä–æ–π—Ç–µ `test_photo_upload.html`** 
5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é
6. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞

### **–®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π  
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

## üîç **–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞–ª–∏—Å—å:**

### **–ü—Ä–æ–±–ª–µ–º–∞: "PERMISSION_DENIED" –≤ userProfiles**
**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ Firestore —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `test_firestore_auth.html` - –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–Ω—É—é –æ—à–∏–±–∫—É

### **–ü—Ä–æ–±–ª–µ–º–∞: –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** 
**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ Storage —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `test_photo_upload.html` - –ø–æ–∫–∞–∂–µ—Ç –æ—à–∏–±–∫—É –∑–∞–≥—Ä—É–∑–∫–∏

### **–ü—Ä–æ–±–ª–µ–º–∞: "auth/operation-not-allowed"**
**–†–µ—à–µ–Ω–∏–µ:**
- –í Firebase Console –≤–∫–ª—é—á–∏—Ç–µ **Anonymous** –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é

## üìä **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**

### **–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏:**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12)**
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console**
3. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—à–∏–±–∫–∏**

### **–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è:**

| –û—à–∏–±–∫–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|
| `storage/unauthorized` | –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ Storage |
| `firestore/permission-denied` | –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ Firestore |
| `auth/operation-not-allowed` | –í–∫–ª—é—á–∏—Ç–µ –∞–Ω–æ–Ω–∏–º–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é |
| `storage/quota-exceeded` | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—ã –≤ Console |

## üéØ **–ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫:**

### **Firebase Console:**
- [ ] –ü—Ä–∞–≤–∏–ª–∞ Storage —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –Ω–µ–¥–∞–≤–Ω–æ)
- [ ] –ü—Ä–∞–≤–∏–ª–∞ Firestore —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –Ω–µ–¥–∞–≤–Ω–æ)  
- [ ] Anonymous Auth –≤–∫–ª—é—á–µ–Ω–∞
- [ ] –ü—Ä–æ–µ–∫—Ç: **newport-23a19**

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- [ ] `test_firestore_auth.html` ‚Üí ‚úÖ –ó–∞–ø–∏—Å—å –≤ userProfiles —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] `test_photo_upload.html` ‚Üí ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í–µ–±-—Å–∞–π—Ç ‚Üí ‚úÖ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É" —Ä–∞–±–æ—Ç–∞–µ—Ç  
- [ ] –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ
- [ ] –í Firebase Console –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

## ‚ö° **–ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (5 –º–∏–Ω—É—Ç):**

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `storage.rules`** ‚Üí Firebase Console ‚Üí Storage ‚Üí Rules ‚Üí Publish
2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `firestore.rules`** ‚Üí Firebase Console ‚Üí Firestore ‚Üí Rules ‚Üí Publish  
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Anonymous Auth** ‚Üí Authentication ‚Üí Sign-in methods ‚Üí Anonymous (–≤–∫–ª—é—á–µ–Ω)
4. **–û—Ç–∫—Ä–æ–π—Ç–µ `test_firestore_auth.html`** ‚Üí –Ω–∞–∂–º–∏—Ç–µ "–ó–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å" ‚Üí –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚úÖ

---

üí° **–°–æ–≤–µ—Ç:** –ù–∞—á–Ω–∏—Ç–µ —Å —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ - –æ–Ω–∏ –ø–æ–∫–∞–∂—É—Ç —Ç–æ—á–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É –∑–∞ 30 —Å–µ–∫—É–Ω–¥! 